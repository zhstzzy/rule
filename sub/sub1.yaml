# url 里填写自己的订阅,名称不能重复
proxy-providers:
  providers1:
    url: "https://dingyue.828820.xyz/f745689d-f564-4c9d-9cec-edb8b52d3a7b"
    type: http
    interval: 3600
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300
    # override:
    # additional-prefix: "[cf]"

ipv6: false
allow-lan: true
mixed-port: 7890
unified-delay: false
tcp-concurrent: true
external-controller: 0.0.0.0:9090
external-ui: ui
external-ui-url: ""
find-process-mode: strict
global-client-fingerprint: chrome

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"
tun:
  enable: false
  stack: mixed
  dns-hijack:
    - "any:53"
    - "tcp://any:53"
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true

dns:
  enable: true
  ipv6: true
  listen: 0.0.0.0:1053
  fake-ip-range: 198.18.0.1/16
  enhanced-mode: fake-ip
  fake-ip-filter:
    - +.lan
    - +.local
    - +.msftncsi.com
    - +.msftconnecttest.com
    - localhost.ptlogin2.qq.com
    - localhost.sec.qq.com
    - localhost.work.weixin.qq.com
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - system
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
  proxy-server-nameserver:
    - tls://1.12.12.12:853
    - tls://223.6.6.6:853
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    - tls://1.0.0.1:853
    - tls://8.8.4.4:853
    - https://cloudflare-dns.com/dns-query
    - https://dns.google/dns-query
    - https://doh.dns.sb/dns-query
  nameserver-policy:
    rule-set:private,cn_domain,direct: system
    rule-set:gfw,proxy,telegram,tld-not-cn:
      - quic://223.5.5.5
      - quic://223.6.6.6
      - https://cloudflare-dns.com/dns-query
      - https://dns.google/dns-query
      - https://1.12.12.12/dns-query
      - https://120.53.53.53/dns-query
  fallback:
    - tls://1.0.0.1:853
    - tls://8.8.4.4:853
    - https://cloudflare-dns.com/dns-query
    - https://dns.google/dns-query
    - https://doh.dns.sb/dns-query
  fallback-filter:
    geoip: true
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32

proxy-groups:
  - {
      name: Proxy,
      type: select,
      proxies: [Auto Select, DIRECT],
      use: [providers1],
      exclude-filter: "(?i)Traffic|Expire|Premium|频道|订阅|ISP|到期|重置|3K大佬下血本|导航站|节点探针",
    }
  - {
      name: Auto Select,
      type: url-test,
      tolerance: 10,
      use: [providers1],
      exclude-filter: "(?i)Traffic|Expire|Premium|频道|订阅|ISP|到期|重置|3K大佬下血本|导航站",
    }
  - { name: Microsoft, type: select, proxies: [DIRECT, Proxy] }
  - {
      name: "AIGC",
      type: "select",
      use: [providers1],
      proxies: [Proxy]
      exclude-filter: "(?i)Traffic|Expire|Premium|频道|订阅|ISP|到期|重置|3K大佬下血本|导航站",
      filter: "(?i)香港|Hong Kong|HK|🇭🇰|新加坡|Singapore|🇸🇬|日本|Japan|🇯🇵|美国|USA|🇺🇸",
    }
  - { name: Block, type: select, proxies: [REJECT] }
  - { name: Fallback, type: select, proxies: [Proxy, Auto Select, DIRECT] }

rule-providers:
  reject:
    type: http
    format: text
    interval: 86400
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt
    path: ./ruleset/reject.yaml
  direct:
    type: http
    format: text
    interval: 86400
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt
    path: ./ruleset/direct.yaml
  applications:
    type: http
    format: text
    interval: 86400
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt
    path: ./ruleset/applications.yaml
  prevent_dns_leak:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://cdn.jsdelivr.net/gh/xishang0128/rules@main/clash%20or%20stash/prevent_dns_leak/prevent_dns_leak_domain.list
  tld-not-cn:
    type: http
    format: text
    interval: 86400
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/tld-!cn.yaml
    path: ./ruleset/tld-not-cn.yaml
  geolocation-!cn:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.yaml
    path: ./ruleset/geolocation-!cn.yaml
    behavior: domain
    interval: 86400
    format: yaml
    type: http
  gfw:
    type: http
    format: text
    interval: 86400
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/gfw.yaml
    path: ./ruleset/gfw.yaml
  proxy:
    type: http
    format: text
    interval: 86400
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo-lite/geosite/proxy.yaml
    path: ./ruleset/proxy.yaml
  private:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo-lite/geosite/private.yaml
    path: ./ruleset/private.yaml
  telegramcidr:
    type: http
    behavior: ipcidr
    interval: 86400
    url: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/telegram.yaml
    path: ./ruleset/telegramcidr.yaml
  lancidr:
    type: http
    behavior: ipcidr
    interval: 86400
    url: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/private.yaml
    path: ./ruleset/lancidr.yaml
  cncidr:
    type: http
    behavior: ipcidr
    interval: 86400
    url: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/cn.yaml
    path: ./ruleset/cncidr.yaml
  youtube:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/youtube.yaml
    path: ./ruleset/youtube.yaml
  cn_domain:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/cn.yaml
    path: ./ruleset/cn_domain.yaml
  telegram:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/telegram.yaml
    path: ./ruleset/telegram.yaml
  github:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/github.yaml
    path: ./ruleset/github.yaml
  microsoft:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/microsoft.yaml
    path: ./ruleset/microsoft.yaml
  ads:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-ads-all.yaml
    path: ./ruleset/category-ads-all.yaml
  copilot:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Copilot/Copilot.yaml
    path: ./ruleset/copilot.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  claude:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml
    path: ./ruleset/claude.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  bard:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BardAI/BardAI.yaml
    path: ./ruleset/bard.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  openai:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
    path: ./ruleset/openai.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
  steam:
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.yaml
    path: ./ruleset/steam.yaml
    behavior: classical
    interval: 86400
    format: yaml
    type: http
rules:
  - RULE-SET,reject,Block
  - RULE-SET,ads,Block
  - RULE-SET,applications,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,direct,DIRECT
  - RULE-SET,cncidr,DIRECT,no-resolve
  - RULE-SET,lancidr,DIRECT,no-resolve
  - RULE-SET,cn_domain,DIRECT
  - RULE-SET,github,Proxy
  - RULE-SET,microsoft,Microsoft
  - RULE-SET,copilot,AIGC
  - RULE-SET,bard,AIGC
  - RULE-SET,openai,AIGC
  - RULE-SET,claude,AIGC
  - RULE-SET,gfw,Proxy
  - RULE-SET,youtube,Proxy
  - RULE-SET,proxy,Proxy
  - RULE-SET,geolocation-!cn,Proxy
  - RULE-SET,tld-not-cn,Proxy
  - RULE-SET,telegramcidr,Proxy,no-resolve
  - RULE-SET,telegram,Proxy
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Fallback
geo-auto-update: false
geo-update-interval: 24
geodata-mode: false
geox-url:
  geoip: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat
  geosite: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat
  mmdb: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb
  asn: https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb
